

cc_library_shared {
    name: "libmmcamera_interface",
    compile_multilib: "32",
    cflags: [
        "-DSYSTEM_HEADER_PREFIX=sys",
        "-DUSE_ION",
        "-DUBWC_PRESENT",
        "-DVENUS_PRESENT",
        "-D_ANDROID_",
        "-DQCAMERA_REDEFINE_LOG",
        "-DFDLEAK_FLAG",
        "-DMEMLEAK_FLAG",
        "-DCAMERA_ION_HEAP_ID=ION_IOMMU_HEAP_ID",
        "-Wall",
        "-Wextra",
        "-Werror",
    ],
    include_dirs: [
        "system/media/camera/include",
        "device/xiaomi/platina/camera/QCamera2/stack/common",
        "device/xiaomi/platina/camera/QCamera2/stack/common/leak",
    ],
    local_include_dirs: ["inc"],
    header_libs: [
        "libhardware_headers",
        "camera_common_headers",
        "camera_fdleak_headers",
        "media_plugin_headers",
        "generated_kernel_headers",
    ],
    ldflags: [
        "-Wl,--wrap=open",
        "-Wl,--wrap=close",
        "-Wl,--wrap=socket",
        "-Wl,--wrap=pipe",
        "-Wl,--wrap=mmap",
        "-Wl,--wrap=__open_2",
        "-Wl,--wrap=malloc",
        "-Wl,--wrap=free",
        "-Wl,--wrap=realloc",
        "-Wl,--wrap=calloc",
    ],

    shared_libs: [
        "libdl",
        "libcutils",
        "liblog",
        "libhal_dbg",
    ],
    srcs: [
        "src/mm_camera_interface.c",
        "src/mm_camera.c",
        "src/mm_camera_muxer.c",
        "src/mm_camera_channel.c",
        "src/mm_camera_stream.c",
        "src/mm_camera_thread.c",
        "src/mm_camera_sock.c",
    ],
    vendor: true,
}
